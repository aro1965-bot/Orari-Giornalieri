 <!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Orari Vigilanza Privata</title>
<style>
  body { font-family: system-ui; padding: 20px; background:#f5f5f5; }
  h2 { margin-bottom: 10px; }
  input, textarea, button { font-size: 18px; margin: 5px 0; padding:5px; width: 100%; max-width: 300px; }
  ul { padding-left: 20px; }
  li { margin: 4px 0; }
  .totali { margin-top:15px; font-weight:bold; }
  button { cursor:pointer; background:#4CAF50; color:white; border:none; border-radius:5px; }
  button:hover { background:#45a049; }
</style>
</head>
<body>
<h2>I miei orari di lavoro</h2>

<input type="date" id="day" placeholder="Giorno"><br>
<input type="time" id="start" placeholder="Inizio">
<input type="time" id="end" placeholder="Fine"><br>
<textarea id="note" placeholder="Note (es. permesso, turno speciale)" rows="2"></textarea><br>

<button onclick="save()">Salva turno</button>
<button onclick="exportCSV()">Esporta CSV</button>

<ul id="list"></ul>

<div class="totali">
  Ore totali ordinarie: <span id="ordinaryTotal">0</span><br>
  Ore totali straordinario: <span id="extraTotal">0</span>
</div>

<script>
const DAILY_STANDARD = 7 + 15/60; // 7h15min = 7.25h
const WEEKLY_DAYS = 6; // 6 giorni lavoro

function save() {
  const d = day.value, s = start.value, e = end.value, n = note.value.trim();
  if (!d || !s || !e) { alert('Compila tutti i campi'); return; }
  const diff = getHours(s,e);
  let data = JSON.parse(localStorage.getItem('orari') || '[]');
  data.push({d,s,e,ore:diff,note:n});
  localStorage.setItem('orari', JSON.stringify(data));
  render();
}

function render() {
  let data = JSON.parse(localStorage.getItem('orari') || '[]');
  data.sort((a,b)=>a.d.localeCompare(b.d));
  const list = document.getElementById('list');
  list.innerHTML = data.map(x=>{
    let extra = Math.max(0,x.ore-DAILY_STANDARD).toFixed(2);
    return `<li>${x.d}: ${x.s} â†’ ${x.e} (${x.ore}h, straordinario: ${extra}h) ${x.note?'- '+x.note:''}</li>`;
  }).join('');
  document.getElementById('ordinar

